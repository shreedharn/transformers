:root{
  --md-typeset-font-size: 0.86rem;   /* try 0.86â€“0.92 */
  --md-typeset-line-height: 1.50;
}

/* ===== Text Justification ===== */
.md-typeset p,
.md-typeset li{
  text-align: justify;
  text-justify: inter-word;
  hyphens: auto;
  -webkit-hyphens: auto;
  -moz-hyphens: auto;
  -ms-hyphens: auto;
}

/* ===== Headings: calmer sizes ===== */
/* ===== Headings scaled down ===== */
.md-content__title,
.md-typeset h1{ font-size: 1.55rem; line-height: 1.22; margin: .9rem 0 .45rem; }
.md-typeset h2{ font-size: 1.22rem; line-height: 1.25; margin: .9rem 0 .4rem; border-bottom: 0; }
.md-typeset h3{ font-size: 1.08rem; margin: .7rem 0 .3rem; }
.md-typeset h4{ font-size: 1.0rem;  margin: .6rem 0 .25rem; }

/* ===== Lists: tighter spacing & smaller indent ===== */
.md-typeset ul,
.md-typeset ol{
  margin: .25rem 0 .55rem 1.1rem;   /* top / bottom / left indent */
  padding-left: 0;                   /* Material adds padding; keep compact */
}
.md-typeset li{ margin: .08rem 0; line-height: 1.45; }
.md-typeset li > p{ margin: .12rem 0; }          /* kill extra paragraph gap inside <li> */
.md-typeset ul ul,
.md-typeset ol ol{ margin: .15rem 0 .25rem 1rem; }  /* nested lists tighter */
.md-typeset li::marker{ font-size: .85em; }      /* slightly smaller bullet */

/* (Optional) compact-only class you can apply to specific lists */
.md-typeset ul.compact,
.md-typeset ol.compact{ margin: .1rem 0 .4rem 1rem; }
.md-typeset .compact > li{ margin: .04rem 0; line-height: 1.4; }

/* Keep code/math a touch smaller to match */
.md-typeset pre, .md-typeset code{ font-size: .85em; }

/* ===== MathJax sizing: both inline and display ===== */

/* Display math (block equations) */
.md-typeset mjx-container[display="true"] {
  font-size: 85%;
  text-align: left !important;
  overflow-x: auto;
  overflow-y: hidden;
  display: block;
  padding: 0.5em 0;
  margin: 0;
  max-width: 100%;
  white-space: normal;
}

/* Inline math (formulas within text) */
.md-typeset mjx-container:not([display="true"]) {
  font-size: 85%;
  white-space: normal;
}

/* Additional fallback for all MathJax containers */
.md-typeset mjx-container {
  font-size: 85%;
}

/* Target MathJax elements more specifically */
mjx-math {
  font-size: 0.85em !important;
}

/* Optional aesthetic: scrollbar for wide equations */
mjx-container::-webkit-scrollbar {
  height: 6px;
}
mjx-container::-webkit-scrollbar-thumb {
  background: #bbb;
  border-radius: 3px;
}

/* Optional: responsive control */
@media (max-width: 800px) {
  mjx-container[jax="CHTML"][display="true"] {
    overflow-x: auto;
    padding-bottom: 0.3em;
  }
}

/* Optional: left-align math blocks within .math-block divs */
.math-block {
  overflow-x: auto;
  overflow-y: hidden;
  margin: 0.5em 0;
  text-align: left;
}

/* ===== Native MathML Styling  ===== */

/* Block-level MathML (display equations) */
.md-typeset math[display="block"] {
  font-size: 85%;
  display: block;
  margin: 0.8em 0;
  padding: 0.3em 0;
  overflow-x: auto;
  overflow-y: hidden;
  max-width: 100%;
  text-align: left;
  word-wrap: normal;
}

/* Inline MathML (within text) */
.md-typeset math[display="inline"],
.md-typeset math:not([display]) {
  font-size: 85%;
  display: inline;
  vertical-align: middle;
  margin: 0 0.15em;
}

/* MathML tables (aligned equations) - ensure proper spacing */
.md-typeset math mtable {
  margin: 0 auto;
  display: table;
}

.md-typeset math mtr {
  display: table-row;
}

.md-typeset math mtd {
  display: table-cell;
  padding: 0.2em 0.5em;
  text-align: inherit;
}

/* MathML fractions - ensure readability */
.md-typeset math mfrac {
  display: inline-block;
  vertical-align: middle;
  text-align: center;
}

/* MathML text elements - proper spacing and wrapping */
.md-typeset math mtext {
  font-family: var(--md-text-font-family, Inter);
  font-style: normal;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Prevent MathML overflow in narrow viewports */
@media (max-width: 800px) {
  .md-typeset math[display="block"] {
    overflow-x: auto;
    padding-bottom: 0.3em;
    font-size: 80%;
  }
}

/* Custom scrollbar for wide MathML equations */
.md-typeset math[display="block"]::-webkit-scrollbar {
  height: 6px;
}

.md-typeset math[display="block"]::-webkit-scrollbar-thumb {
  background: #bbb;
  border-radius: 3px;
}

/* Fix for MathML in table cells */
.md-typeset td math,
.md-typeset th math {
  font-size: 90%;
  display: inline;
}

/* Ensure proper line height for math-heavy paragraphs */
.md-typeset p:has(math) {
  line-height: 1.6;
  margin: 0.5em 0;
}

/* Add spacing before/after math blocks within content */
.md-typeset math[display="block"] + p,
.md-typeset math[display="block"] + ul,
.md-typeset math[display="block"] + ol {
  margin-top: 0.8em;
}

.md-typeset p + math[display="block"],
.md-typeset ul + math[display="block"],
.md-typeset ol + math[display="block"],
.md-typeset h3 + math[display="block"],
.md-typeset h4 + math[display="block"] {
  margin-top: 0.6em;
}